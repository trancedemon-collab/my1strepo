<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Cipher App</title>
    <!-- Use the Inter font from Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <!-- Load Tailwind CSS from CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background color */
        }
        /* Custom scrollbar for the text areas */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #2d3748; /* Darker track */
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb {
            background: #4a5568; /* Darker thumb */
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb:hover {
            background: #718096; /* Lighter thumb on hover */
        }
        .text-area-glow {
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .text-area-glow:focus {
            outline: none;
            border-color: #63b3ed; /* Light blue glow */
            box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.5);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Main application container -->
    <div class="w-full max-w-2xl bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8 space-y-6 transform transition-all duration-300 ease-in-out">
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-100 text-center">Cipher Tool</h1>
        <p class="text-center text-gray-400 text-sm sm:text-base">
            Encrypt or decrypt your text using a simple character-by-character shift.
        </p>

        <!-- Input and mode selection section -->
        <div class="space-y-4">
            <!-- Text input area -->
            <div class="relative">
                <textarea id="inputText" class="w-full p-4 border-2 border-gray-700 rounded-lg bg-gray-900 text-gray-200 focus:border-blue-400 transition-colors text-area-glow" rows="5" placeholder="Enter your text here..."></textarea>
            </div>

            <!-- Mode selection buttons -->
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <button id="encryptButton" class="w-full sm:w-1/2 p-3 font-semibold text-white bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 transition-all duration-200 transform hover:-translate-y-1 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                    Encrypt
                </button>
                <button id="decryptButton" class="w-full sm:w-1/2 p-3 font-semibold text-blue-400 bg-gray-700 border-2 border-blue-400 rounded-lg shadow-md hover:bg-gray-600 transition-all duration-200 transform hover:-translate-y-1 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50">
                    Decrypt
                </button>
            </div>
        </div>

        <!-- Output section -->
        <div class="space-y-4">
            <h2 class="text-xl font-semibold text-gray-300 text-center">Result:</h2>
            <div class="relative">
                <textarea id="outputText" class="w-full p-4 border-2 border-gray-700 rounded-lg bg-gray-900 text-gray-200 text-area-glow" rows="5" placeholder="Your result will appear here..." readonly></textarea>
                <button id="copyButton" class="absolute bottom-2 right-2 p-2 bg-gray-700 rounded-full text-gray-400 hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                        <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                    </svg>
                </button>
                <!-- Custom message box for copy confirmation -->
                <div id="messageBox" class="absolute bottom-16 left-1/2 transform -translate-x-1/2 bg-gray-200 text-gray-900 text-sm px-4 py-2 rounded-lg opacity-0 transition-opacity duration-300 pointer-events-none">
                    Copied to clipboard!
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript logic -->
    <script>
        // The core cipher logic, translated from Python to JavaScript.
        /**
         * Encrypts the input text by shifting each character and digit by one.
         * @param {string} text - The input string to be encrypted.
         * @returns {string} The encrypted string.
         */
        function cyphor(text) {
            let result = "";
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                if (char >= 'a' && char <= 'z') {
                    // Shift lowercase letters
                    result += String.fromCharCode((char.charCodeAt(0) - 'a'.charCodeAt(0) + 1) % 26 + 'a'.charCodeAt(0));
                } else if (char >= 'A' && char <= 'Z') {
                    // Shift uppercase letters
                    result += String.fromCharCode((char.charCodeAt(0) - 'A'.charCodeAt(0) + 1) % 26 + 'A'.charCodeAt(0));
                } else if (char >= '0' && char <= '9') {
                    // Shift digits
                    result += ((parseInt(char) + 1) % 10).toString();
                } else {
                    // Keep other characters as they are
                    result += char;
                }
            }
            return result;
        }

        /**
         * Decrypts the input text by shifting each character and digit back by one.
         * @param {string} text - The input string to be decrypted.
         * @returns {string} The decrypted string.
         */
        function decyphor(text) {
            let result = "";
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                if (char >= 'a' && char <= 'z') {
                    // Shift lowercase letters back
                    const charCode = char.charCodeAt(0) - 'a'.charCodeAt(0) - 1;
                    result += String.fromCharCode((charCode % 26 + 26) % 26 + 'a'.charCodeAt(0));
                } else if (char >= 'A' && char <= 'Z') {
                    // Shift uppercase letters back
                    const charCode = char.charCodeAt(0) - 'A'.charCodeAt(0) - 1;
                    result += String.fromCharCode((charCode % 26 + 26) % 26 + 'A'.charCodeAt(0));
                } else if (char >= '0' && char <= '9') {
                    // Shift digits back
                    const digit = parseInt(char);
                    const newDigit = (digit - 1 + 10) % 10; // Handle negative numbers
                    result += newDigit.toString();
                } else {
                    // Keep other characters as they are
                    result += char;
                }
            }
            return result;
        }

        // Get DOM elements
        const inputTextElement = document.getElementById('inputText');
        const outputTextElement = document.getElementById('outputText');
        const encryptButton = document.getElementById('encryptButton');
        const decryptButton = document.getElementById('decryptButton');
        const copyButton = document.getElementById('copyButton');
        const messageBox = document.getElementById('messageBox');

        // Event listener for the Encrypt button
        encryptButton.addEventListener('click', () => {
            const inputValue = inputTextElement.value;
            outputTextElement.value = cyphor(inputValue);
        });

        // Event listener for the Decrypt button
        decryptButton.addEventListener('click', () => {
            const inputValue = inputTextElement.value;
            outputTextElement.value = decyphor(inputValue);
        });

        // Event listener for the Copy button
        copyButton.addEventListener('click', () => {
            // Get the text from the output area
            const textToCopy = outputTextElement.value;
            if (textToCopy) {
                // Use the deprecated but supported document.execCommand for clipboard access
                // due to iFrame security restrictions on navigator.clipboard.writeText
                outputTextElement.select();
                document.execCommand('copy');

                // Show the copy confirmation message
                messageBox.classList.remove('opacity-0', 'pointer-events-none');
                messageBox.classList.add('opacity-100');
                
                // Hide the message after a delay
                setTimeout(() => {
                    messageBox.classList.remove('opacity-100');
                    messageBox.classList.add('opacity-0', 'pointer-events-none');
                }, 1500);
            }
        });

        // Pre-fill the input with a sample to demonstrate functionality
        window.onload = () => {
            inputTextElement.value = "Hello World! 123";
            outputTextElement.value = cyphor(inputTextElement.value);
        };
    </script>
</body>
</html>

